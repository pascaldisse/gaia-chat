DâŸ¨OâŸ¨
  title:TâŸ¨è“‹ è«‡ æ‡‰ç”¨âŸ©,
  description:TâŸ¨ä¸€ å¤šäººæ ¼ è«‡ æ‡‰ç”¨ èˆ‡ æ™ºèƒ½ åŠŸèƒ½ å’Œ æ™º-é©…å‹• è§’è‰²âŸ©,
  version:TâŸ¨1.0.0âŸ©,
  platform:TâŸ¨ç¶²âŸ©,
  framework:TâŸ¨æ‡‰âŸ©,
  components:LâŸ¨
    OâŸ¨
      name:TâŸ¨æ‡‰ç”¨âŸ©,
      type:TâŸ¨ä»¶âŸ©,
      format:TâŸ¨æ‡‰å…ƒâŸ©,
      path:TâŸ¨æ‡‰ç”¨.è„šæœ¬âŸ©,
      code:lâ‚€âŸ¨
NâŸ¨æ‡‰, { ç‹€æ…‹, æ•ˆæœ } å¾ 'æ‡‰'âŸ©
NâŸ¨è«‡ å¾ './ä»¶/è«‡'âŸ©
NâŸ¨å´æ¬„ å¾ './ä»¶/å´æ¬„'âŸ©
NâŸ¨ä»£ç†æµ å¾ './ä»¶/ä»£ç†æµ/ä»£ç†æµ'âŸ©
NâŸ¨è“‹å·¢ç¤ºç¯„ å¾ './ä»¶/è“‹å·¢/è“‹å·¢ç¤ºç¯„'âŸ©
NâŸ¨{ è«‡åº«, ç”¨æˆ¶åº« } å¾ './å‹™/åº«'âŸ©
NâŸ¨'./é¢¨æ ¼/ä¸»é¡Œ.css'âŸ©
NâŸ¨'./é¢¨æ ¼/å´æ¬„.css'âŸ©
NâŸ¨'./æ‡‰ç”¨.css'âŸ©
NâŸ¨'./é¢¨æ ¼/è«‡.css'âŸ©
NâŸ¨{ æ¨¡å‹ } å¾ './é…ç½®'âŸ©
NâŸ¨{ è§’è‰²åº« } å¾ './å‹™/åº«'âŸ©
NâŸ¨è§’è‰² å¾ './å‹/è§’è‰²'âŸ©
NâŸ¨è§’è‰²ç®¡ç†å™¨ å¾ './ä»¶/è§’è‰²/è§’è‰²ç®¡ç†å™¨'âŸ©
NâŸ¨è§’è‰²å•†åº— å¾ './ä»¶/è§’è‰²/è§’è‰²å•†åº—'âŸ©
NâŸ¨ç®¡ç†é¢æ¿ å¾ './ä»¶/ç®¡ç†/ç®¡ç†é¢æ¿'âŸ©
NâŸ¨{ è“‹é…ç½®, é»˜èªè§’è‰²ID } å¾ './é…ç½®/é»˜èªè§’è‰²'âŸ©
NâŸ¨{ ç”¨æˆ¶æä¾›å™¨, ç”¨æˆ¶ä½¿ç”¨ } å¾ './å¢ƒ/ç”¨æˆ¶å¢ƒ'âŸ©

FâŸ¨æ‡‰ç”¨å…§å®¹âŸ©
  å¸¸é‡ { ç”¨æˆ¶: ç•¶å‰ç”¨æˆ¶ } = ç”¨æˆ¶ä½¿ç”¨();
  SâŸ¨
    ç•¶å‰è«‡: [], 
    æ¨¡å‹: æ¨¡å‹.LLAMA3_70B,
    ç³»çµ±æç¤º: 'ä½  éƒ½ ä¸€ åŠ©æ‰‹.',
    è«‡æ­·å²: [],
    é¸æ“‡è«‡ID: null,
    è§’è‰²å€‘: [],
    é¸æ“‡è§’è‰²ID: null,
    é¡¯ç¤ºè§’è‰²ç®¡ç†: false,
    ç·¨è¼¯è§’è‰²: null,
    æ´»å‹•è§’è‰²: [],
    æ´»å‹•ç”¨æˆ¶: [],
    è¦–åœ–æ¨¡å¼: 'è«‡',
    å´æ¬„å¯è¦‹: false
  âŸ©

  // è¼‰å…¥è«‡æ­·å²å¾æ•¸æ“šåº«
  æ•ˆæœ(() => {
    FâŸ¨è¼‰å…¥è«‡, âŸ©
      å˜—è©¦ {
        // å–è«‡åŸºæ–¼ç”¨æˆ¶ç‹€æ…‹
        è®“ è«‡é›†;
        å¦‚æœ (ç•¶å‰ç”¨æˆ¶) {
          æ§åˆ¶å°.è¨˜éŒ„("è¼‰å…¥è«‡ç‚ºç”¨æˆ¶:", ç•¶å‰ç”¨æˆ¶.æ¨™è­˜);
          è«‡é›† = ç­‰å¾… è«‡åº«.å–è«‡æŒ‰ç”¨æˆ¶(ç•¶å‰ç”¨æˆ¶.æ¨™è­˜);
        } å¦å‰‡ {
          æ§åˆ¶å°.è¨˜éŒ„("è¼‰å…¥è«‡ç‚ºåŒ¿åç”¨æˆ¶");
          è«‡é›† = ç­‰å¾… è«‡åº«.å–å…¨éƒ¨è«‡();
          è«‡é›† = è«‡é›†.éæ¿¾(è«‡ => !è«‡.ç”¨æˆ¶æ¨™è­˜);
        }
        
        å¸¸é‡ æ’åºè«‡ = è«‡é›†.æ’åº((ç”², ä¹™) => ä¹™.å‰µå»ºæ–¼ - ç”².å‰µå»ºæ–¼);
        
        å¦‚æœ (é¸æ“‡è«‡ID) {
          å¸¸é‡ ç•¶å‰è«‡å¾åº« = è«‡é›†.å°‹æ‰¾(è«‡ => è«‡.æ¨™è­˜ === é¸æ“‡è«‡ID);
          å¦‚æœ (ç•¶å‰è«‡å¾åº«) {
            è¨­ç½®ç•¶å‰è«‡(
              é™£åˆ—.æ˜¯é™£åˆ—(ç•¶å‰è«‡å¾åº«.æ¶ˆæ¯) 
                ? ç•¶å‰è«‡å¾åº«.æ¶ˆæ¯ 
                : []
            );
            
            // Set active personas
            å¸¸é‡ æ´»å‹•è§’è‰²å€‘ = è§’è‰²å€‘.éæ¿¾(è§’ => 
              ç•¶å‰è«‡å¾åº«.æ´»å‹•è§’è‰²?.åŒ…å«(è§’.æ¨™è­˜)
            );
            è¨­ç½®æ´»å‹•è§’è‰²(æ´»å‹•è§’è‰²å€‘);
            
            // Load active users for this chat
            å¦‚æœ (é™£åˆ—.æ˜¯é™£åˆ—(ç•¶å‰è«‡å¾åº«.åƒèˆ‡è€…) && ç•¶å‰è«‡å¾åº«.åƒèˆ‡è€….é•·åº¦ > 0) {
              // Fetch user data for all participants
              å¸¸é‡ è¼‰å…¥è«‡åƒèˆ‡è€… = ç•°æ­¥ () => {
                try {
                  // Get all users
                  const allUsers = await userDB.getAllUsers();
                  
                  // Filter to just the participants in this chat
                  const chatParticipants = allUsers.filter(user => 
                    currentChatFromDB.participants.includes(user.id) &&
                    (currentUser && user.id !== currentUser.id) // Don't include current user in the UI list
                  );
                  
                  // Update state with chat participants
                  setActiveUsers(chatParticipants);
                } catch (error) {
                  console.error('Error loading chat participants:', error);
                }
              };
              
              loadChatParticipants();
            } else {
              // No participants in this chat
              setActiveUsers([]);
            }
          }
        }
        
        setChatHistory(sortedChats);
      } catch (error) {
        console.error('Error loading chats:', error);
      }
    };
    loadChats();
  }, [selectedChatId, personas, currentUser]);

  // æ ¸å¿ƒè«‡åŠŸèƒ½ï¼ˆä¿å­˜ï¼Œè¼‰å…¥ï¼Œè§’è‰²ç®¡ç†ï¼‰
  // ...è«‡åŠŸèƒ½å¯¦ç¾...

  è¿”å› (
    â–¡{æ‡‰ç”¨}âŸ¦
      <æŒ‰éˆ• 
        é¡å="æ¼¢å ¡èœå–®" 
        é»æ“Š={() => è¨­ç½®å´æ¬„å¯è¦‹(!å´æ¬„å¯è¦‹)}
        æ¨™ç±¤="åˆ‡æ›å´æ¬„"
      >
        <svg è¦–åœ–æ¡†="0 0 24 24" å¯¬="24" é«˜="24" å¡«å……="ç•¶å‰é¡è‰²">
          <è·¯å¾‘ d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
        </svg>
      </æŒ‰éˆ•>
      
      <å€å¡Š é¡å={`å´æ¬„å®¹å™¨ ${å´æ¬„å¯è¦‹ ? 'å¯è¦‹' : 'éš±è—'}`}>
        <å´æ¬„ 
          è¨­ç½®ç•¶å‰è«‡={è¨­ç½®ç•¶å‰è«‡} 
          è«‡æ­·å²={è«‡æ­·å²}
          é¸æ“‡è«‡ID={é¸æ“‡è«‡ID}
          è¨­ç½®é¸æ“‡è«‡ID={è¨­ç½®é¸æ“‡è«‡ID}
          å‰µå»ºæ–°è«‡={å‰µå»ºæ–°è«‡}
          è§’è‰²å€‘={è§’è‰²å€‘}
          é¸æ“‡è§’è‰²ID={é¸æ“‡è§’è‰²ID}
          è¨­ç½®é¸æ“‡è§’è‰²ID={è¨­ç½®é¸æ“‡è§’è‰²ID}
          å‰µå»ºæ–°è§’è‰²={å‰µå»ºæ–°è§’è‰²}
          ç·¨è¼¯è§’è‰²={è¨­ç½®ç·¨è¼¯è§’è‰²}
        />
        <æŒ‰éˆ• 
          é¡å="å´æ¬„é—œé–‰" 
          é»æ“Š={() => è¨­ç½®å´æ¬„å¯è¦‹(å‡)}
        >
          âœ•
        </æŒ‰éˆ•>
      </å€å¡Š>
      
      <å€å¡Š é¡å="è¦–åœ–åˆ‡æ›">
        <æŒ‰éˆ• 
          é¡å={è¦–åœ–æ¨¡å¼ === 'è«‡' ? 'æ´»å‹•' : ''} 
          é»æ“Š={() => è¨­ç½®è¦–åœ–æ¨¡å¼('è«‡')}
        >
          <svg è¦–åœ–æ¡†="0 0 24 24" å¯¬="16" é«˜="16" å¡«å……="ç•¶å‰é¡è‰²">
            <è·¯å¾‘ d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z" />
          </svg>
          <è·¨åº¦>è«‡</è·¨åº¦>
        </æŒ‰éˆ•>
        <æŒ‰éˆ• 
          é¡å={è¦–åœ–æ¨¡å¼ === 'ä»£ç†æµ' ? 'æ´»å‹•' : ''} 
          é»æ“Š={() => è¨­ç½®è¦–åœ–æ¨¡å¼('ä»£ç†æµ')}
        >
          <svg è¦–åœ–æ¡†="0 0 24 24" å¯¬="16" é«˜="16" å¡«å……="ç•¶å‰é¡è‰²">
            <è·¯å¾‘ d="M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3h7zM7 9H4V5h3v4zm10 6h3v4h-3v-4zm0-10h3v4h-3V5z" />
          </svg>
          <è·¨åº¦>ä»£ç†å·¥ä½œæµ</è·¨åº¦>
        </æŒ‰éˆ•>
        <æŒ‰éˆ• 
          é¡å={è¦–åœ–æ¨¡å¼ === 'å•†åº—' ? 'æ´»å‹•' : ''} 
          é»æ“Š={() => è¨­ç½®è¦–åœ–æ¨¡å¼('å•†åº—')}
        >
          <svg è¦–åœ–æ¡†="0 0 24 24" å¯¬="16" é«˜="16" å¡«å……="ç•¶å‰é¡è‰²">
            <è·¯å¾‘ d="M12 2l-5.5 9h11L12 2zm0 3.84L13.93 9h-3.87L12 5.84zM17.5 13c-2.49 0-4.5 2.01-4.5 4.5s2.01 4.5 4.5 4.5 4.5-2.01 4.5-4.5-2.01-4.5-4.5-4.5zm0 7c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM3 21.5h8v-8H3v8zm2-6h4v4H5v-4z" />
          </svg>
          <è·¨åº¦>è§’è‰²å•†åº—</è·¨åº¦>
        </æŒ‰éˆ•>
        <æŒ‰éˆ• 
          é¡å={è¦–åœ–æ¨¡å¼ === 'å·¢å¿ƒ' ? 'æ´»å‹•' : ''} 
          é»æ“Š={() => è¨­ç½®è¦–åœ–æ¨¡å¼('å·¢å¿ƒ')}
        >
          <svg è¦–åœ–æ¡†="0 0 24 24" å¯¬="16" é«˜="16" å¡«å……="ç•¶å‰é¡è‰²">
            <è·¯å¾‘ d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z" />
          </svg>
          <è·¨åº¦>å·¢å¿ƒ</è·¨åº¦>
        </æŒ‰éˆ•>
        {ç•¶å‰ç”¨æˆ¶?.æ˜¯ç®¡ç† && (
          <æŒ‰éˆ• 
            é¡å={è¦–åœ–æ¨¡å¼ === 'ç®¡ç†' ? 'æ´»å‹•' : ''} 
            é»æ“Š={() => è¨­ç½®è¦–åœ–æ¨¡å¼('ç®¡ç†')}
          >
            <svg è¦–åœ–æ¡†="0 0 24 24" å¯¬="16" é«˜="16" å¡«å……="ç•¶å‰é¡è‰²">
              <è·¯å¾‘ d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 9.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" />
            </svg>
            <è·¨åº¦>ç®¡ç†</è·¨åº¦>
          </æŒ‰éˆ•>
        )}
      </å€å¡Š>
      
      {è¦–åœ–æ¨¡å¼ === 'è«‡' ? (
        <è«‡ 
          ç•¶å‰è«‡={ç•¶å‰è«‡} 
          è¨­ç½®ç•¶å‰è«‡={è¨­ç½®ç•¶å‰è«‡} 
          æ¨¡å‹={æ¨¡å‹}
          ç³»çµ±æç¤º={ç³»çµ±æç¤º}
          è§’è‰²å€‘={è§’è‰²å€‘}
          æ´»å‹•è§’è‰²={æ´»å‹•è§’è‰²}
          è¨­ç½®æ´»å‹•è§’è‰²={è¨­ç½®æ´»å‹•è§’è‰²}
          æ´»å‹•ç”¨æˆ¶={æ´»å‹•ç”¨æˆ¶}
          è¨­ç½®æ´»å‹•ç”¨æˆ¶={è¨­ç½®æ´»å‹•ç”¨æˆ¶}
          é¸æ“‡è«‡ID={é¸æ“‡è«‡ID}
          è«‡æ­·å²={è«‡æ­·å²}
          è¨­ç½®è«‡æ­·å²={è¨­ç½®è«‡æ­·å²}
        />
      ) : è¦–åœ–æ¨¡å¼ === 'ä»£ç†æµ' ? (
        <ä»£ç†æµ />
      ) : è¦–åœ–æ¨¡å¼ === 'å•†åº—' ? (
        <è§’è‰²å•†åº— />
      ) : è¦–åœ–æ¨¡å¼ === 'ç®¡ç†' ? (
        <ç®¡ç†é¢æ¿ />
      ) : è¦–åœ–æ¨¡å¼ === 'å·¢å¿ƒ' ? (
        <è“‹å·¢ç¤ºç¯„ />
      ) : (
        <è§’è‰²å•†åº— />
      )}
      
      {ç·¨è¼¯è§’è‰² && (
        <è§’è‰²ç®¡ç†å™¨ 
          è§’è‰²={ç·¨è¼¯è§’è‰²}
          æ›´æ–°è§’è‰²={è™•ç†ç·¨è¼¯è§’è‰²}
          åˆªé™¤={è™•ç†åˆªé™¤è§’è‰²}
          é—œé–‰={() => è¨­ç½®ç·¨è¼¯è§’è‰²(ç©º)}
        />
      )}
    âŸ§
  );
âŸ¨/FâŸ©

FâŸ¨AppâŸ©
  return (
    â–¡{root}âŸ¦
      <UserProvider>
        <AppContent />
      </UserProvider>
    âŸ§
  );
âŸ¨/FâŸ©

export default App;
      âŸ©
    âŸ©,
    OâŸ¨
      name:TâŸ¨é…ç½®âŸ©,
      type:TâŸ¨ç³»âŸ©,
      path:TâŸ¨é…ç½®.è„šæœ¬âŸ©,
      format:TâŸ¨è„šæœ¬âŸ©,
      code:lâ‚€âŸ¨
å°å‡º å¸¸é‡ æ¥å£å¯†é‘° = 'u5q1opMM9uw9x84EJLtxqaQ6HcnXbUAq';
å°å‡º å¸¸é‡ æ¨¡å‹ = {
  LLAMA3_70B: 'meta-llama/Meta-Llama-3-70B-Instruct',
  MIXTRAL_8X22B: 'mistralai/Mixtral-8x22B-Instruct-v0.1',
  DEEPSEEK_V3: 'deepseek-ai/DeepSeek-V3',
  DEEPSEEK_R1: 'deepseek-ai/DeepSeek-R1',
  DBRX: 'databricks/dbrx-instruct'
};

å°å‡º å¸¸é‡ åœ–åƒæ¨¡å‹ = {
  FLUX_SCHNELL: 'black-forest-labs/FLUX-1-schnell',
  FLUX_DEV: 'black-forest-labs/FLUX-1-dev'
};
      âŸ©
    âŸ©,
    OâŸ¨
      name:TâŸ¨è«‡âŸ©,
      type:TâŸ¨ä»¶âŸ©,
      path:TâŸ¨ä»¶/è«‡.è„šæœ¬âŸ©,
      format:TâŸ¨æ‡‰å…ƒâŸ©,
      code:lâ‚€âŸ¨
NâŸ¨æ‡‰, { ç‹€æ…‹, å¼•ç”¨, æ•ˆæœ } å¾ 'æ‡‰'âŸ©
NâŸ¨è¨Šæ¯ å¾ './è¨Šæ¯'âŸ©
NâŸ¨{ æ¥å£å¯†é‘°, æ¨¡å‹, åœ–åƒæ¨¡å‹ } å¾ '../é…ç½®'âŸ©
NâŸ¨'../é¢¨æ ¼/è«‡.css'âŸ©
NâŸ¨è«‡è¼¸å…¥ å¾ './è«‡è¼¸å…¥'âŸ©
NâŸ¨{ è§’è‰²æ‰®æ¼”ç³»çµ± } å¾ '../å·¥å…·/è§’è‰²æ‰®æ¼”ç³»çµ±'âŸ©
NâŸ¨{ è§’è‰² } å¾ '../å·¥å…·/è§’è‰²'âŸ©
NâŸ¨{ é»˜èªè§’è‰²ID } å¾ '../é…ç½®/é»˜èªè§’è‰²'âŸ©
NâŸ¨æ–‡ä»¶é è¦½ å¾ './æ–‡ä»¶é è¦½'âŸ©
NâŸ¨{ è«‡åº«, çŸ¥è­˜åº«, ç”¨æˆ¶åº« } å¾ '../å‹™/åº«'âŸ©
NâŸ¨{ è§£ææ–‡ä»¶å…§å®¹ } å¾ '../å·¥å…·/æ–‡ä»¶è§£æå™¨'âŸ©
NâŸ¨{ è§’è‰²ä»£ç† } å¾ "../å‹™/ä»£ç†æœå‹™"âŸ©
NâŸ¨{ å‰µå»ºè§’è‰²å·¥å…· } å¾ "../å‹™/å·¥å…·"âŸ©
NâŸ¨{ æ˜¯éª°å­å‘½ä»¤, æå–éª°å­åƒæ•¸, æ ¼å¼åŒ–éª°å­è¡¨ç¤ºæ³• } å¾ "../å·¥å…·/å·¥å…·å¯¦ç”¨ç¨‹åº"âŸ©

// è«‡ ä»¶ å¯¦ç¾
CâŸ¨è«‡, { 
  ç•¶å‰è«‡, 
  è¨­ç½®ç•¶å‰è«‡, 
  æ¨¡å‹, 
  ç³»çµ±æç¤º, 
  è§’è‰²å€‘,
  æ´»å‹•è§’è‰²,
  è¨­ç½®æ´»å‹•è§’è‰²,
  æ´»å‹•ç”¨æˆ¶,
  è¨­ç½®æ´»å‹•ç”¨æˆ¶,
  é¸æ“‡è«‡ID,
  è«‡æ­·å²,
  è¨­ç½®è«‡æ­·å²
}âŸ©
  // è«‡ ä»¶ ç‹€æ…‹ å’Œ æ–¹æ³•
  // ...å¯¦ç¾è©³æƒ…...
  
  è¿”å› (
    â–¡{è«‡å®¹å™¨}âŸ¦
      {/* è«‡ ç•Œé¢ ä»¶ */}
      <å€å¡Š é¡å="è¨Šæ¯">
        {ç•¶å‰è«‡.æ˜ å°„(è¨Šæ¯ => (
          <è¨Šæ¯ 
            éµ={è¨Šæ¯.æ¨™è­˜} 
            è¨Šæ¯={è¨Šæ¯} 
            é‡ç”Ÿæˆ={è™•ç†é‡ç”Ÿæˆ}
            è§’è‰²å€‘={è§’è‰²å€‘}
          />
        ))}
        <å€å¡Š å¼•ç”¨={è¨Šæ¯å°¾å¼•ç”¨} />
      </å€å¡Š>
      
      <è«‡è¼¸å…¥
        è§’è‰²å€‘={è§’è‰²å€‘}
        ç™¼é€è¨Šæ¯={(è¨Šæ¯) => {
          å¦‚æœ (è¨Šæ¯.é–‹å§‹æ–¼('/')) {
            å¸¸é‡ [å‘½ä»¤, ...åƒæ•¸] = è¨Šæ¯.åˆ‡ç‰‡(1).åˆ†å‰²(' ');
            è™•ç†å‘½ä»¤(å‘½ä»¤, åƒæ•¸.åŠ å…¥(' '));
          } å¦å‰‡ {
            è™•ç†æäº¤(è¨Šæ¯);
          }
        }}
        æ­£åœ¨è¼‰å…¥={æ­£åœ¨è¼‰å…¥}
        å–æ¶ˆ={() => {
          è¨­ç½®å·²å–æ¶ˆ(çœŸ);
          å¦‚æœ (æ§åˆ¶å™¨å¼•ç”¨.ç•¶å‰) {
            æ§åˆ¶å™¨å¼•ç”¨.ç•¶å‰.ä¸­æ­¢();
          }
        }}
        åˆ‡æ›æœç´¢={(å•Ÿç”¨) => {
          è¨­ç½®ç•¶å‰è«‡(å‰ => [...å‰, {
            æ¨™è­˜: æ—¥æœŸ.ç¾åœ¨(),
            å…§å®¹: å•Ÿç”¨ 
              ? "ğŸ” ç¶² æœç´¢å·²å•Ÿç”¨ã€‚ä½ çš„è¨Šæ¯å°‡ ä¹Ÿæœç´¢ ç¶² ä½¿ç”¨DuckDuckGoã€‚" 
              : "ğŸ” ç¶² æœç´¢å·²ç¦ç”¨ã€‚",
            æ˜¯ç”¨æˆ¶: å‡,
            æ˜¯å‘½ä»¤: çœŸ,
            è§’è‰²æ¨™è­˜: æ´»å‹•è§’è‰².å°‹æ‰¾(è§’ => è§’.æ˜¯é»˜èª)?.æ¨™è­˜ || æ´»å‹•è§’è‰²[0]?.æ¨™è­˜
          }]);
        }}
      />
    âŸ§
  );
âŸ¨/CâŸ©

å°å‡º é»˜èª è«‡;
      âŸ©
    âŸ©,
    OâŸ¨
      name:TâŸ¨è§’è‰²âŸ©,
      type:TâŸ¨å‹âŸ©,
      path:TâŸ¨å‹/è§’è‰².è„šæœ¬âŸ©,
      format:TâŸ¨è„šæœ¬âŸ©,
      code:lâ‚€âŸ¨
å°å‡º é»˜èª é¡ è§’è‰² {
    æ§‹é€ å™¨({ 
      æ¨™è­˜ = æ—¥æœŸ.ç¾åœ¨(),
      åç¨±,
      ç³»çµ±æç¤º,
      æ¨¡å‹,
      å°è©±ç¤ºä¾‹ = [],
      çŸ¥è­˜æ–‡ä»¶ = [],
      åœ–åƒ = '',
      èªéŸ³æ¨™è­˜ = ç©º,
      initiative = 5,
      talkativeness = 5,
      confidence = 5,
      curiosity = 5,
      empathy = 5,
      creativity = 5,
      humor = 5,
      adaptability = 5,
      patience = 5,
      skepticism = 5,
      optimism = 5,
      activeInChats = [],
      isDefault = false,
      isSystem = false,
      userId = null,
      agentSettings = null,
      category = 'general',
      isNsfw = false,
      description = '',
      creator = '',
      tags = [],
      downloads = 0,
      rating = 0,
      published = false,
      partnerCreated = false,
      formatSettings = { 
        useRoleplayMarkdown: false,
        customFormatting: false,
        formatRules: []
      }
    }) {
      this.id = id;
      this.name = name;
      this.systemPrompt = systemPrompt;
      this.model = model;
      this.exampleDialogue = exampleDialogue;
      this.knowledgeFiles = knowledgeFiles;
      this.image = image;
      this.voiceId = voiceId;     // Voice ID for TTS
      this.createdAt = Date.now();
      this.updatedAt = Date.now();
      this.initiative = initiative;
      this.talkativeness = talkativeness;
      this.confidence = confidence;
      this.curiosity = curiosity;
      this.empathy = empathy;
      this.creativity = creativity;
      this.humor = humor;
      this.adaptability = adaptability;
      this.patience = patience;
      this.skepticism = skepticism;
      this.optimism = optimism;
      this.activeInChats = activeInChats;
      this.isDefault = isDefault; // Marks as default persona like GAIA
      this.isSystem = isSystem;   // Marks as system-wide, not tied to user
      this.userId = userId;       // Links to user if user-created
      
      // Store attributes
      this.category = category;   // Category in the store
      this.isNsfw = isNsfw;       // Flag for NSFW content
      this.description = description; // Longer description for store listing
      this.creator = creator;     // Creator name or username
      this.tags = tags;           // Array of tags for searching
      this.downloads = downloads; // Number of downloads/uses
      this.rating = rating;       // Average rating (0-5)
      this.published = published; // Whether published to store
      this.partnerCreated = partnerCreated; // Whether created by partner
      this.formatSettings = formatSettings; // Format settings for message rendering

      // Initialize agent settings if provided
      if (agentSettings) {
        this.agentSettings = agentSettings;
      }
    }
  }
      âŸ©
    âŸ©,
    OâŸ¨
      name:TâŸ¨æ•¸æ“šåº«âŸ©,
      type:TâŸ¨ç³»âŸ©,
      path:TâŸ¨å‹™/åº«.è„šæœ¬âŸ©,
      format:TâŸ¨è„šæœ¬âŸ©,
      code:lâ‚€âŸ¨
NâŸ¨{ é–‹å•Ÿæ•¸æ“šåº« } å¾ 'idb'âŸ©

// æ•¸æ“šåº«é…ç½®
å¸¸é‡ æ•¸æ“šåº«å = 'è«‡æ‡‰ç”¨';
å¸¸é‡ æ•¸æ“šåº«ç‰ˆæœ¬ = 6;
å¸¸é‡ è«‡å­˜å„² = 'è«‡é›†';
å¸¸é‡ è§’è‰²å­˜å„² = 'è§’è‰²é›†';
å¸¸é‡ çŸ¥è­˜å­˜å„² = 'çŸ¥è­˜æ–‡ä»¶';
å¸¸é‡ å·¥ä½œæµå­˜å„² = 'å·¥ä½œæµ';
å¸¸é‡ æ¨¡æ¿å­˜å„² = 'å·¥ä½œæµæ¨¡æ¿';
å¸¸é‡ ç”¨æˆ¶å­˜å„² = 'ç”¨æˆ¶é›†';

// æ•¸æ“šåº«åˆå§‹åŒ–å’Œå‡ç´š
è®“ æ•¸æ“šåº«æ‰¿è«¾ = é–‹å•Ÿæ•¸æ“šåº«(æ•¸æ“šåº«å, æ•¸æ“šåº«ç‰ˆæœ¬, {
  å‡ç´š(åº«, èˆŠç‰ˆæœ¬, æ–°ç‰ˆæœ¬, äº‹å‹™) {
    // å‰µå»ºæˆ–æ›´æ–°å°è±¡å­˜å„²
    å¦‚æœ (!åº«.å°è±¡å­˜å„²å.åŒ…å«(è«‡å­˜å„²)) {
      å¸¸é‡ è«‡å­˜ = åº«.å‰µå»ºå°è±¡å­˜å„²(è«‡å­˜å„², { éµè·¯å¾‘: 'æ¨™è­˜' });
      è«‡å­˜.å‰µå»ºç´¢å¼•('ç”¨æˆ¶æ¨™è­˜', 'ç”¨æˆ¶æ¨™è­˜');
    }
    
    å¦‚æœ (!åº«.å°è±¡å­˜å„²å.åŒ…å«(è§’è‰²å­˜å„²)) {
      å¸¸é‡ è§’è‰²å­˜ = åº«.å‰µå»ºå°è±¡å­˜å„²(è§’è‰²å­˜å„², { 
        éµè·¯å¾‘: 'æ¨™è­˜',
        è‡ªå‹•å¢é‡: çœŸ 
      });
      è§’è‰²å­˜.å‰µå»ºç´¢å¼•('ç”¨æˆ¶æ¨™è­˜', 'ç”¨æˆ¶æ¨™è­˜');
    }
    
    // å…¶ä»–å­˜å„²å‰µå»ºé‚è¼¯...
  }
});

// æ•¸æ“šåº«æœå‹™å°å‡º
å°å‡º å¸¸é‡ è«‡åº« = {
  FâŸ¨å–å…¨éƒ¨è«‡, âŸ©
    å˜—è©¦ {
      å¸¸é‡ åº« = ç­‰å¾… æ•¸æ“šåº«æ‰¿è«¾;
      è¿”å› åº«.å–å…¨éƒ¨(è«‡å­˜å„²);
    } æ•ç² (éŒ¯èª¤) {
      æ§åˆ¶å°.éŒ¯èª¤('éŒ¯èª¤ç²å–æ‰€æœ‰è«‡:', éŒ¯èª¤);
      è¿”å› [];
    }
  âŸ¨/FâŸ©,
  
  // å…¶ä»–è«‡æ•¸æ“šåº«æ–¹æ³•...
};

å°å‡º å¸¸é‡ è§’è‰²åº« = {
  FâŸ¨å–å…¨éƒ¨è§’è‰², âŸ©
    å˜—è©¦ {
      å¸¸é‡ åº« = ç­‰å¾… æ•¸æ“šåº«æ‰¿è«¾;
      è¿”å› åº«.å–å…¨éƒ¨(è§’è‰²å­˜å„²);
    } æ•ç² (éŒ¯èª¤) {
      æ§åˆ¶å°.éŒ¯èª¤('éŒ¯èª¤ç²å–æ‰€æœ‰è§’è‰²:', éŒ¯èª¤);
      è¿”å› [];
    }
  âŸ¨/FâŸ©,
  
  // å…¶ä»–è§’è‰²æ•¸æ“šåº«æ–¹æ³•...
};

å°å‡º å¸¸é‡ çŸ¥è­˜åº« = {
  // çŸ¥è­˜æ•¸æ“šåº«æ–¹æ³•...
};

å°å‡º å¸¸é‡ ç”¨æˆ¶åº« = {
  // ç”¨æˆ¶æ•¸æ“šåº«æ–¹æ³•...
};
      âŸ©
    âŸ©
  âŸ©,
  styles:LâŸ¨
    OâŸ¨
      name:TâŸ¨AppâŸ©,
      path:TâŸ¨App.cssâŸ©,
      content:â–¡{css}âŸ¦
.app {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

.hamburger-menu {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 100;
  background: #3f51b5;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 8px;
  cursor: pointer;
}

.sidebar-container {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 280px;
  background-color: #f5f5f5;
  transition: transform 0.3s ease;
  z-index: 90;
}

.sidebar-container.hidden {
  transform: translateX(-100%);
}

.sidebar-container.visible {
  transform: translateX(0);
}

.sidebar-close {
  position: absolute;
  top: 10px;
  right: 10px;
  background: transparent;
  border: none;
  font-size: 18px;
  cursor: pointer;
}

.view-toggle {
  display: flex;
  justify-content: center;
  padding: 10px;
  background-color: #f5f5f5;
  border-bottom: 1px solid #ddd;
}

.view-toggle button {
  display: flex;
  align-items: center;
  margin: 0 5px;
  padding: 8px 12px;
  border: none;
  border-radius: 4px;
  background-color: transparent;
  cursor: pointer;
}

.view-toggle button.active {
  background-color: #3f51b5;
  color: white;
}

.view-toggle button span {
  margin-left: 5px;
}

@media (max-width: 768px) {
  .sidebar-container {
    width: 100%;
  }
  
  .view-toggle button span {
    display: none;
  }
}
      âŸ§
    âŸ©,
  ui:UIâŸ¨âœ±âŸ©
    theme:OâŸ¨
      colors:OâŸ¨
        primary:TâŸ¨#3f51b5âŸ©,
        secondary:TâŸ¨#f50057âŸ©,
        background:TâŸ¨#f5f5f5âŸ©,
        text:TâŸ¨#333333âŸ©,
        accent:TâŸ¨#00bcd4âŸ©
      âŸ©,
      fonts:OâŸ¨
        main:TâŸ¨Arial, sans-serifâŸ©,
        headings:TâŸ¨'Roboto', sans-serifâŸ©,
        monospace:TâŸ¨'Courier New', monospaceâŸ©
      âŸ©
    âŸ©,
    layout:OâŸ¨
      sidebar:OâŸ¨
        width:TâŸ¨280pxâŸ©,
        collapsedWidth:TâŸ¨60pxâŸ©
      âŸ©,
      chat:OâŸ¨
        maxWidth:TâŸ¨1200pxâŸ©,
        messageSpacing:TâŸ¨16pxâŸ©
      âŸ©
    âŸ©
  âŸ¨/UIâŸ©,
  dependencies:OâŸ¨
    æ‡‰:TâŸ¨^18.3.1âŸ©,
    æ‡‰Dom:TâŸ¨^18.3.1âŸ©,
    idb:TâŸ¨^8.0.2âŸ©,
    éˆ:TâŸ¨^0.3.19âŸ©,
    æ·±åŸº:TâŸ¨^2.0.2âŸ©
  âŸ©
âŸ©âŸ©